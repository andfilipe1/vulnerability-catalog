/* home-generator.js:
 * Get data and generate the graphical elements to home page.
 */

/* Vulnerability bar: */
// updating the progress-bar elements: //
url = "/catalog/vulnerability/data/json/filter/?field=risk"
var data;
d3.json(url, function(d) {
    data = d;

    for (var i in data) {
      var field = data[i].risk;
      var value = data[i].vulnerabilities;

      // updating the progrees bar attributes:
      var bar = d3.select("#vulnerabilityBar")
          .append("div")
          .attr("class", function() { if (field == "High") {
                                           return "progress-bar bg-danger"
                                       } else if (field == "Medium") {
                                           return "progress-bar bg-warning"
                                       } else if (field == "Low") {
                                           return "progress-bar bg-secondary"
                                     } })
          .attr("role", "progressbar")
          .style("width", function() { return value + "%"; })
          .attr("aria-valuenow", value)
          .attr("data-toggle", "tooltip")
          .attr("title", field + ": " + value)
          .attr("onclick", function() {
                         return "location.href=\"/catalog/panorama\""; })
          .text(field);
    }

});
/* End of Vulnerability bar: */
